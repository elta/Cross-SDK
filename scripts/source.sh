#! /bin/bash

export JOBS=3

export BZ=tar.bz2
export GZ=tar.gz
export XZ=tar.xz

###########################################################
# Version/suffix and url
###########################################################

export ARCLOAD_VERSION=0.5
export ARCLOAD_SUFFIX=${BZ}
export ARCLOAD_URL=ftp://ftp.linux-mips.org/pub/linux/mips/people/skylark
export AUTOCONF_VERSION=2.69
export AUTOCONF_SUFFIX=${XZ}
export AUTOCONF_URL=http://ftp.gnu.org/gnu/autoconf
export AUTOMAKE_VERSION=1.12.3
export AUTOMAKE_SUFFIX=${XZ}
export AUTOMAKE_URL=http://ftp.gnu.org/gnu/automake
export BASH_VERSION=4.2
export BASH_SUFFIX=${GZ}
export BASH_URL=http://ftp.gnu.org/gnu/bash
export BINUTILS_VERSION=2.22
export BINUTILS_SUFFIX=${BZ}
export BINUTILS_URL=http://ftp.gnu.org/gnu/binutils
export BISON_VERSION=2.5
export BISON_SUFFIX=${BZ}
export BISON_URL=http://ftp.gnu.org/gnu/bison
export BOOTSCRIPTS_VERSION=2.0-pre1
export BOOTSCRIPTS_SUFFIX=${BZ}
export BOOTSCRIPTS_URL=http://cross-lfs.org/~cosmo/sources
export BUSYBOX_VERSION=1.20.1
export BUSYBOX_SUFFIX=${BZ}
export BUSYBOX_URL=http://www.busybox.net/downloads
export BZIP2_VERSION=1.0.6
export BZIP2_SUFFIX=${GZ}
export BZIP2_URL=http://www.bzip.org/1.0.6
export CLOOG_VERSION=0.16.3
export CLOOG_SUFFIX=${GZ}
export CLOOG_URL=http://www.bastoul.net/cloog/pages/download
export COLO_VERSION=1.22
export COLO_SUFFIX=${GZ}
export COLO_URL=http://www.colonel-panic.org/cobalt-mips/colo
export COREUTILS_VERSION=8.16
export COREUTILS_SUFFIX=${XZ}
export COREUTILS_URL=http://ftp.gnu.org/gnu/coreutils
export DBUS_VERSION=1.6.8
export DBUS_SUFFIX=${GZ}
export DBUS_URL=http://dbus.freedesktop.org/releases/dbus
export DEJAGNU_VERSION=1.5
export DEJAGNU_SUFFIX=${GZ}
export DEJAGNU_URL=http://ftp.gnu.org/gnu/dejagnu
export DHCPCD_VERSION=5.5.6
export DHCPCD_SUFFIX=${BZ}
export DHCPCD_URL=http://roy.aydogan.net/dhcpcd
export DIFFUTILS_VERSION=3.2
export DIFFUTILS_SUFFIX=${XZ}
export DIFFUTILS_URL=http://ftp.gnu.org/gnu/diffutils
export DVHTOOL_VERSION=1.0.1.orig
export DVHTOOL_SUFFIX=${GZ}
export DVHTOOL_URL=http://ftp.debian.org/debian/pool/main/d/dvhtool
export E2FSPROGS_VERSION=1.42.3
export E2FSPROGS_SUFFIX=${BZ}
export E2FSPROGS_URL=http://www.kernel.org/pub/linux/kernel/people/tytso/e2fsprogs/v1.42.3
export EGLIBC_VERSION=2.15
export EGLIBC_SUFFIX=${XZ}
export EGLIBC_URL=http://cross-lfs.org/files
export EGLIBCPORTS_VERSION=2.15
export EGLIBCPORTS_SUFFIX=${XZ}
export EGLIBCPORTS_URL=http://cross-lfs.org/files
export EXPAT_VERSION=2.1.0
export EXPAT_SUFFIX=${GZ}
export EXPAT_URL=http://jaist.dl.sourceforge.net/project/expat/expat/2.1.0
export EXPECT_VERSION=5.45
export EXPECT_SUFFIX=${GZ}
export EXPECT_URL=http://downloads.sourceforge.net/project/expect/Expect/5.45
export FILE9_VERSION=5.09
export FILE9_SUFFIX=${GZ}
export FILE9_URL=ftp://ftp.astron.com/pub/file
export FILE11_VERSION=5.11
export FILE11_SUFFIX=${GZ}
export FILE11_URL=ftp://ftp.astron.com/pub/file
export FINDUTILS_VERSION=4.4.2
export FINDUTILS_SUFFIX=${GZ}
export FINDUTILS_URL=http://ftp.gnu.org/gnu/findutils
export FLEX_VERSION=2.5.35
export FLEX_SUFFIX=${BZ}
export FLEX_URL=http://downloads.sourceforge.net/flex
export GAWK_VERSION=4.0.1
export GAWK_SUFFIX=${XZ}
export GAWK_URL=http://ftp.gnu.org/gnu/gawk
export GCC_VERSION=4.6.3
export GCC_SUFFIX=${BZ}
export GCC_URL=ftp://gcc.gnu.org/pub/gcc/releases/gcc-4.6.3
export GDB_VERSION=7.4
export GDB_SUFFIX=${BZ}
export GDB_URL=http://ftp.gnu.org/gnu/gdb
export GETTEXT_VERSION=0.18.1.1
export GETTEXT_SUFFIX=${GZ}
export GETTEXT_URL=http://ftp.gnu.org/gnu/gettext
export GLIB_VERSION=2.28.8
export GLIB_SUFFIX=${XZ}
export GLIB_URL=http://ftp.acc.umu.se/pub/gnome/sources/glib/2.28
export GMP_VERSION=5.0.5
export GMP_SUFFIX=${XZ}
export GMP_URL=http://ftp.gnu.org/gnu/gmp
export GREP_VERSION=2.12
export GREP_SUFFIX=${XZ}
export GREP_URL=http://ftp.gnu.org/gnu/grep
export GROFF_VERSION=1.21
export GROFF_SUFFIX=${GZ}
export GROFF_URL=http://ftp.gnu.org/gnu/groff
export GZIP_VERSION=1.4
export GZIP_SUFFIX=${XZ}
export GZIP_URL=http://ftp.gnu.org/gnu/gzip
export IANA_VERSION=2.30
export IANA_SUFFIX=${BZ}
export IANA_URL=http://ftp.cross-lfs.org/pub/clfs/conglomeration/iana-etc
export IPROUTE2_VERSION=3.3.0
export IPROUTE2_SUFFIX=${XZ}
export IPROUTE2_URL=http://www.kernel.org/pub//linux/utils/net/iproute2
export IPUTILS_VERSION=s20101006
export IPUTILS_SUFFIX=${BZ}
export IPUTILS_URL=http://www.skbuff.net/iputils
export KBD_VERSION=1.15.3
export KBD_SUFFIX=${BZ}
export KBD_URL=http://fossies.org/linux/misc
export KMOD_VERSION=8
export KMOD_SUFFIX=${XZ}
export KMOD_URL=http://www.kernel.org/pub//linux/utils/kernel/kmod
export LESS_VERSION=444
export LESS_SUFFIX=${GZ}
export LESS_URL=http://www.greenwoodsoftware.com/less
export LIBEE_VERSION=0.4.1
export LIBEE_SUFFIX=${GZ}
export LIBEE_URL=http://www.libee.org/download/files/download
export LIBESTR_VERSION=0.1.4
export LIBESTR_SUFFIX=${GZ}
export LIBESTR_URL=http://libestr.adiscon.com/files/download
export LIBTOOL_VERSION=2.4.2
export LIBTOOL_SUFFIX=${XZ}
export LIBTOOL_URL=http://ftp.gnu.org/gnu/libtool
export LINUX_VERSION=3.3.7
export LINUX_SUFFIX=${XZ}
export LINUX_URL=http://www.kernel.org/pub/linux/kernel/v3.0
export LLVM_VERSION=3.2.src
export LLVM_SUFFIX=${GZ}
export LLVM_URL=http://llvm.org/releases/3.2
export CLANG_VERSION=3.2.src
export CLANG_SUFFIX=${GZ}
export CLANG_URL=http://llvm.org/releases/3.2
export CRT_VERSION=3.2.src
export CRT_SUFFIX=${GZ}
export CRT_URL=http://llvm.org/releases/3.2
export M4_VERSION=1.4.16
export M4_SUFFIX=${BZ}
export M4_URL=http://ftp.gnu.org/gnu/m4
export MAKE_VERSION=3.82
export MAKE_SUFFIX=${BZ}
export MAKE_URL=http://ftp.gnu.org/gnu/make
export MAN_VERSION=1.6g
export MAN_SUFFIX=${GZ}
export MAN_URL=http://primates.ximian.com/~flucifredi/man
export MANPAGES_VERSION=3.41
export MANPAGES_SUFFIX=${XZ}
export MANPAGES_URL=http://www.kernel.org/pub//linux/docs/man-pages
export MODULE_VERSION=3.15
export MODULE_SUFFIX=${GZ}
export MODULE_URL=http://pkgs.fedoraproject.org/repo/pkgs/module-init-tools/module-init-tools-3.15.tar.gz/54ea790aa9dfbcfadb250f4571e50013
export MPC_VERSION=0.9
export MPC_SUFFIX=${GZ}
export MPC_URL=http://www.multiprecision.org/mpc/download
export MPFR_VERSION=3.1.0
export MPFR_SUFFIX=${BZ}
export MPFR_URL=http://www.mpfr.org/mpfr-3.1.0
export NCURSES_VERSION=5.9
export NCURSES_SUFFIX=${GZ}
export NCURSES_URL=ftp://ftp.gnu.org/pub/gnu/ncurses
export NEWLIB_VERSION=1.20.0
export NEWLIB_SUFFIX=${GZ}
export NEWLIB_URL=ftp://sources.redhat.com/pub/newlib
export OPENSSL_VERSION=1.0.1c
export OPENSSL_SUFFIX=${GZ}
export OPENSSL_URL=http://www.openssl.org/source
export PATCH_VERSION=2.6.1
export PATCH_SUFFIX=${BZ}
export PATCH_URL=http://ftp.gnu.org/gnu/patch
export PERL_VERSION=5.14.2
export PERL_SUFFIX=${BZ}
export PERL_URL=http://www.cpan.org/src/5.0
export PKG_VERSION=0.26
export PKG_SUFFIX=${GZ}
export PKG_URL=http://pkgconfig.freedesktop.org/releases
export PPL_VERSION=0.11.2
export PPL_SUFFIX=${BZ}
export PPL_URL=http://bugseng.com/products/ppl/download/ftp/releases/0.11.2
export PROCPS_VERSION=3.2.8
export PROCPS_SUFFIX=${GZ}
export PROCPS_URL=http://fossies.org/linux/misc
export PSMISC_VERSION=22.17
export PSMISC_SUFFIX=${GZ}
export PSMISC_URL=http://downloads.sourceforge.net/psmisc
export READLINE_VERSION=6.2
export READLINE_SUFFIX=${GZ}
export READLINE_URL=http://ftp.gnu.org/gnu/readline
export RSYSLOG_VERSION=6.2.0
export RSYSLOG_SUFFIX=${GZ}
export RSYSLOG_URL=http://www.rsyslog.com/files/download/rsyslog
export SED_VERSION=4.2.1
export SED_SUFFIX=${BZ}
export SED_URL=http://ftp.gnu.org/gnu/sed
export SHADOW_VERSION=4.1.5
export SHADOW_SUFFIX=${BZ}
export SHADOW_URL=http://pkg-shadow.alioth.debian.org/releases
export SYSFSUTILS_VERSION=2.1.0
export SYSFSUTILS_SUFFIX=${GZ}
export SYSFSUTILS_URL=http://pkgs.fedoraproject.org/repo/pkgs/sysfsutils/sysfsutils-2.1.0.tar.gz/14e7dcd0436d2f49aa403f67e1ef7ddc
export SYSVINIT_VERSION=2.88dsf
export SYSVINIT_SUFFIX=${BZ}
export SYSVINIT_URL=http://download.savannah.gnu.org/releases/sysvinit
export TAR_VERSION=1.26
export TAR_SUFFIX=${BZ}
export TAR_URL=http://ftp.gnu.org/gnu/tar
export TCL_VERSION=8.5.11-src
export TCL_SUFFIX=${GZ}
export TCL_URL=http://downloads.sourceforge.net/tcl
export TERMCAP_VERSION=1.3.1
export TERMCAP_SUFFIX=${GZ}
export TERMCAP_URL=http://fossies.org/unix/misc/old
export TEXINFO_VERSION=4.13
export TEXINFO_SUFFIX=${GZ}
export TEXINFO_URL=http://ftp.gnu.org/gnu/texinfo
export TK_VERSION=8.5.11-src
export TK_SUFFIX=${GZ}
export TK_URL=http://mon1.saske.sk/gentoo/distfiles
export U_VERSION=2012.04.01
export U_SUFFIX=${BZ}
export U_URL=http://ftp.denx.de/pub/u-boot
export UCLIBC_VERSION=0.9.33.2
export UCLIBC_SUFFIX=${XZ}
export UCLIBC_URL=http://www.uclibc.org/downloads
export UDEV_VERSION=182
export UDEV_SUFFIX=${XZ}
export UDEV_URL=http://www.kernel.org/pub//linux/utils/kernel/hotplug
export UTIL_VERSION=linux-2.20.1
export UTIL_SUFFIX=${BZ}
export UTIL_URL=http://www.kernel.org/pub//linux/utils/util-linux/v2.20
export VIM_VERSION=7.3
export VIM_SUFFIX=${BZ}
export VIM_URL=ftp://ftp.vim.org/pub/vim/unix
export VIM_DIR=vim73
export WXGTK_VERSION=2.8.8
export WXGTK_SUFFIX=${BZ}
export WXGTK_URL=http://biolpc22.york.ac.uk/pub/2.8.8
export XZ_VERSION=5.0.3
export XZ_SUFFIX=${XZ}
export XZ_URL=http://tukaani.org/xz
export ZLIB_VERSION=1.2.7
export ZLIB_SUFFIX=${BZ}
export ZLIB_URL=http://zlib.net
export QTC_VERSION=2.5.2-src
export QTC_SUFFIX=${GZ}
export QTC_URL=http://releases.qt-project.org/qtcreator/2.5.2/
export QEMU_VERSION=1.3.0
export QEMU_SUFFIX=${BZ}
export QEMU_URL=http://wiki.qemu-project.org/download/

export OPENOCD_GITURL=git://openocd.git.sourceforge.net/gitroot/openocd/openocd
export UBOOT_GITURL=git://git.denx.de/u-boot.git
export RTEMS_GITURL=git://git.rtems.org/rtems.git
export CROSSPROJECTMANAGER_GITURL=https://github.com/elta/crossprojectmanager.git

###########################################################
# Build flags
###########################################################

unset CFLAGS
unset CXXFLAGS
export CFLAGS="-w"
export CROSS_HOST=${MACHTYPE}
export CROSS_TARGET64="mips64el-unknown-linux-gnu"
export CROSS_TARGET32="mipsel-unknown-linux-gnu"
export CROSS_RTEMSTARGET64="mips64-rtems4.11"
export CROSS_RTEMSTARGET32="mips-rtems4.11"
export CROSS_BARETARGET64="mips64el-unknown-elf"
export CROSS_BARETARGET32="mipsel-unknown-elf"
export QEMU_TARGET="mips64el-softmmu,mipsel-softmmu,mipsel-linux-user,mips64-softmmu,mips-softmmu,mips-linux-user"

export BUILD32="-mabi=32"
export BUILDN32="-mabi=n32"
export BUILD64="-mabi=64"

###########################################################
# Basic directory info
###########################################################

export SCRIPT="$(pwd)"
export PATCH=${SCRIPT}/../patches
export TARBALL=${SCRIPT}/../tarballs
export SRC_LIVE=${SCRIPT}/../src_live

###########################################################
# Prefixes
###########################################################

export PREFIX=${SCRIPT}/../sdk
export PREFIXGNULINUX=${PREFIX}/gnu-linux
export PREFIXGNU64=${PREFIX}/gnu64
export PREFIXGNU32=${PREFIX}/gnu32
export PREFIXRTEMS64=${PREFIX}/rtems64
export PREFIXRTEMS32=${PREFIX}/rtems32
export PREFIXBARE64=${PREFIX}/elf64
export PREFIXBARE32=${PREFIX}/elf32
export PREFIXQEMU=${PREFIX}/qemu
export PREFIXLLVM=${PREFIX}/llvm
export PREFIXQTC=${PREFIX}/qt-creator
export PREFIXMUL64EL=${PREFIX}/mips64el-multilib/
export PREFIXPURE64EL=${PREFIX}/mips64el-pure64/
export PREFIXMIPSEL=${PREFIX}/mipsel/
export PREFIXMIPSELSYSROOT=${PREFIX}/mipsel-sysroot/
export PREFIXKERNEL=${PREFIX}/kernel
export PREFIXMIPS64ELSYSROOT=${PREFIX}/mips64el-rootfs/

export SYSROOTGNU64=${PREFIXGNU64}/${CROSS_TARGET64}/sys-root/
export SYSROOTGNU32=${PREFIXGNU32}/${CROSS_TARGET32}/sys-root/

###########################################################
# Busybox info
###########################################################

export MOUNT_POINT=busybox_mount

export BUSYBOXO32_IMAGE=busybox-o32.img
export BUSYBOXN32_IMAGE=busybox-mipsel-n32.img
export BUSYBOXMUL64_IMAGE=busybox-mul64.img
export BUSYBOXPURE64_IMAGE=busybox-pure64.img

###########################################################
# METADATA info
###########################################################

export METADATADOWN=${SCRIPT}/../metadata/download
export METADATABUSYBOXMUL64=${SCRIPT}/../metadata/busybox-mul64
export METADATABUSYBOXPURE64=${SCRIPT}/../metadata/busybox-pure64
export METADATABUSYBOXN32=${SCRIPT}/../metadata/busybox-n32
export METADATABUSYBOXO32=${SCRIPT}/../metadata/busybox-o32
export METADATAKERNEL64=${SCRIPT}/../metadata/kernel-64
export METADATAKERNELN32=${SCRIPT}/../metadata/kernel-n32
export METADATAKERNELO32=${SCRIPT}/../metadata/kernel-o32
export METADATABARE32=${SCRIPT}/../metadata/elf32
export METADATABARE64=${SCRIPT}/../metadata/elf64
export METADATAGNU32=${SCRIPT}/../metadata/gnu32
export METADATAGNU64=${SCRIPT}/../metadata/gnu64
export METADATAUNIVERSAL=${SCRIPT}/../metadata/universal
export METADATARTEMS32=${SCRIPT}/../metadata/rtems32
export METADATARTEMS64=${SCRIPT}/../metadata/rtems64
export METADATAMIPSELSYSROOT=${SCRIPT}/../metadata/mipsel-sysroot
export METADATAMIPS64ELSYSROOT=${SCRIPT}/../metadata/mips64el-rootfs

###########################################################
# SRC info
###########################################################

export SRC=${SCRIPT}/../src
export SRCBUSYBOXMUL64=${SCRIPT}/../src/busybox-mul64
export SRCBUSYBOXPURE64=${SCRIPT}/../src/busybox-pure64
export SRCBUSYBOXN32=${SCRIPT}/../src/busybox-n32
export SRCBUSYBOXO32=${SCRIPT}/../src/busybox-o32
export SRCKERNEL64=${SCRIPT}/../src/kernel-64
export SRCKERNELN32=${SCRIPT}/../src/kernel-n32
export SRCKERNELO32=${SCRIPT}/../src/kernel-o32
export SRCMUL64ELSTAGE1=${SCRIPT}/../src/mips64el-multilib64-linux/stage1
export SRCMUL64ELSTAGE2=${SCRIPT}/../src/mips64el-multilib64-linux/stage2
export SRCMUL64ELSTAGE3=${SCRIPT}/../src/mips64el-multilib64-linux/stage3
export SRCPURE64ELSTAGE1=${SCRIPT}/../src/mips64el-pure64-linux/stage1
export SRCPURE64ELSTAGE2=${SCRIPT}/../src/mips64el-pure64-linux/stage2
export SRCPURE64ELSTAGE3=${SCRIPT}/../src/mips64el-pure64-linux/stage3
export SRCMIPSELSTAGE1=${SCRIPT}/../src/mipsel-unknown-linux/stage1
export SRCMIPSELSTAGE2=${SCRIPT}/../src/mipsel-unknown-linux/stage2
export SRCMIPSELSTAGE3=${SCRIPT}/../src/mipsel-unknown-linux/stage3
export SRCBARE32=${SCRIPT}/../src/mips-elf-tool
export SRCBARE64=${SCRIPT}/../src/mips64-elf-tool
export SRCGNU32=${SCRIPT}/../src/mips-linux-tool
export SRCGNU64=${SCRIPT}/../src/mips64-linux-tool
export SRCUNIVERSAL=${SCRIPT}/../src/universal
export SRCRTEMS32=${SCRIPT}/../src/mips-rtems-tool
export SRCRTEMS64=${SCRIPT}/../src/mips64-rtems-tool
export SRCMIPSELSYSROOT=${SCRIPT}/../src/mipsel-sysroot
export SRCMIPS64ELSYSROOT=${SCRIPT}/../src/mips64el-rootfs

###########################################################
# BUILD info
###########################################################

export BUILD=${SCRIPT}/../build
export BUILDBUSYBOXMUL64=${SCRIPT}/../build/busybox-mul64
export BUILDBUSYBOXPURE64=${SCRIPT}/../build/busybox-pure64
export BUILDBUSYBOXN32=${SCRIPT}/../build/busybox-n32
export BUILDBUSYBOXO32=${SCRIPT}/../build/busybox-o32
export BUILDKERNEL64=${SCRIPT}/../build/kernel-64
export BUILDKERNELN32=${SCRIPT}/../build/kernel-n32
export BUILDKERNELO32=${SCRIPT}/../build/kernel-o32
export BUILDMUL64ELSTAGE1=${SCRIPT}/../build/mips64el-multilib64-linux/stage1
export BUILDMUL64ELSTAGE2=${SCRIPT}/../build/mips64el-multilib64-linux/stage2
export BUILDMUL64ELSTAGE3=${SCRIPT}/../build/mips64el-multilib64-linux/stage3
export BUILDPURE64ELSTAGE1=${SCRIPT}/../build/mips64el-pure64-linux/stage1
export BUILDPURE64ELSTAGE2=${SCRIPT}/../build/mips64el-pure64-linux/stage2
export BUILDPURE64ELSTAGE3=${SCRIPT}/../build/mips64el-pure64-linux/stage3
export BUILDMIPSELSTAGE1=${SCRIPT}/../build/mipsel-unknown-linux/stage1
export BUILDMIPSELSTAGE2=${SCRIPT}/../build/mipsel-unknown-linux/stage2
export BUILDMIPSELSTAGE3=${SCRIPT}/../build/mipsel-unknown-linux/stage3
export BUILDBARE32=${SCRIPT}/../build/mips-elf-tool
export BUILDBARE64=${SCRIPT}/../build/mips64-elf-tool
export BUILDGNU32=${SCRIPT}/../build/mips-linux-tool
export BUILDGNU64=${SCRIPT}/../build/mips64-linux-tool
export BUILDUNIVERSAL=${SCRIPT}/../build/universal
export BUILDRTEMS32=${SCRIPT}/../build/mips-rtems-tool
export BUILDRTEMS64=${SCRIPT}/../build/mips64-rtems-tool
export BUILDMIPSELSYSROOT=${SCRIPT}/../build/mipsel-sysroot
export BUILDMIPS64ELSYSROOT=${SCRIPT}/../build/mips64el-rootfs

###########################################################
# Functions
###########################################################

function die() {
  echo "$1"
  exit 1
}

function download()
{
    [ -f $TARBALL/$1 ] && rm $TARBALL/$1
    wget -O "$TARBALL/$1" "$2"
}

function count_back ()
{
    echo "SDK Path Is: ${PREFIX}"

    for ((i = 5; i > 0; i--)); do
        echo -e "\rScript Will Start In $i Second     \c"
        sleep 1;
    done;

    echo -e "\rScript Begin:                                        "
}

###########################################################
# Wait 5 Second and begin script.
###########################################################

count_back

